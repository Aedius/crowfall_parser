<html>
<head>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type"/>

    <!-- https://apexcharts.com/docs/update-charts-from-json-api-ajax/ -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

    <style>
        #container .chart_float{
        float: left;
            width:16%;
        }

        #config #file {
            float:left;
            width:50%;
        }

        #config #param {
            float:left;
            width:50%;
        }

    </style>
</head>
<body>
<div id="config">

    <div id="file">
        Choose your file ( should be in C:\Users\&lt;YOUR WINDOWS USERNAME&gt;>\AppData\LocalLow\Art+Craft\Crowfall\CombatLogs )<br/>
        <input type="file" id="file-selector">
    </div>
    <div id="param">
        <input type="number" value="30" id="time-between"> secondes between fight <br/>
        <input type="number" value="30" id="minimum-time"> secondes minimum length <br/>
    </div>

    <div>
        <h2>Fight list <select id="fight_list"></select></h2>
    </div>

</div>

<div id="container">


    <div class="full-time">
        <h2>Damage received</h2>
        <div id="time_damage_received"></div>
    </div>
    <div class="full-time">
        <h2>Heal received</h2>
        <div id="time_heal_received"></div>
    </div>
    <div class="full-time">
        <h2>Damage emit</h2>
        <div id="time_damage_emit"></div>
    </div>
    <div class="full-time">
        <h2>Heal emit</h2>
        <div id="time_heal_emit"></div>
    </div>

    <div class="chart_float">
        <h2>Emit by Kind</h2>
        <div id="chart_emit_by_kind"></div>
    </div>
    <div class="chart_float">
        <h2>Received by Kind</h2>
        <div id="chart_received_by_kind"></div>
    </div>
    <div class="chart_float">
        <h2>Emit by Opponent</h2>
        <div id="chart_emit_by_enemy"></div>
    </div>
    <div class="chart_float">
        <h2>Received by Opponent</h2>
        <div id="chart_received_by_enemy"></div>
    </div>

    <div class="chart_float">
        <h2>Heal emit by ally</h2>
        <div id="chart_emit_by_ally"></div>
    </div>
    <div class="chart_float">
        <h2>Heal received by ally</h2>
        <div id="chart_received_by_ally"></div>
    </div>
</div>

<script src="loader.js"></script>
<script type="module">
    // https://rustwasm.github.io/wasm-bindgen/examples/without-a-bundler.html
    import init, { parse } from './pkg/crowfall_parser.js';
    async function run() {
        await init();
        window.parse = parse;
    }
    run();
</script>

</body>

